# Deployment Process


Firstly, it is assumed that the user has the working copy of the application code and the compatible package versions from the **artifactory**. This document makes use of **dev-d2** server as an example, but, when deploying to a different server the procedure would remain same whereas some terminologies would differ. Following below are the steps.

Step 1: Open a command line tool (in administrator mode is recommended) at your projects root folder and **```run mvnw -Pprod package```** command. This will create a war file in the target folder of your application. At a very rare case, there could be an error experienced while building the package **```Error: Could not find or load main class org.apache.maven.wrapper.MavenWrapperMain```**. This can be fixed by copy/replace the **.mvn** folder, **mvnw** and **mvnw.cmd** file from a project that is generated by the **jhipster** to the application’s root directory. Also, append **```-Dmaven.test.skip=true```** to your mvnw command and to disable the client side test cases open pom.xml and comment the **webpack:test** configurations till the test cases are implemented.

Step 2: Copy the generated war file to from the target folder of your application to a certain location in the **VDI** desktop (say folder named **‘dev-d2’** for example).

Step 3: Open **gitBash** in your **VDI’s** desktop screen.

Step 4: Run **```ssh tomcat@lx-phoenixd2```** (**d2** is server name).

Step 5: Login with the appropriate password when prompted for.

Step 6: Run **```cd ../../tomcat```** to change the working directory to the one where the .war files are to be deployed.

Step 7: Remove the existing war file using the command **```rm -rf warfilename.war```** to avoid duplications.

Step 8: Open a fresh **gitBash** window from the directly where the newly generated war file is stored (in our case it is folder **‘dev-d2’** as mentioned in step 2).

Step 9: Repeat step 4.

Step 10: Run **```scp warfilename.war tomcat@lx-phoenixd2:/tomcat```**.

Step 11: Repeat Step 5.

Step 12: After the war file is successfully deployed run the following command to make the app running.

**```java -jar -Dspring.profiles.active=dev-d2 warfilename.war```**

After the application is deployed successfully and launched in the browser, there would be a possibility of an issue that arises when multiple **Kerberos** requests come at the same time. In our case, this was happened when **user-services** and **sample-apps** were run in parallel and each of them had requests to the **Kerberos** for authentication. Running the following command and res would fix this issue:

**```java -jar -Dspring.profiles.active=dev-d2 -Dsun.security.krb5.rcache=none warfilename.war```**
